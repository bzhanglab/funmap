function create_dag(a,b,c,d="dag",e=false,f="",g=1){return fetch(`${f}data/dag/${b}/${c}.json`).then(h=>h.json()).then(i=>{if(i.nodes.length>50&&!e){console.log("Clique too large to render");return false}function j(){const r=document.getElementById(d).offsetWidth;const s=document.getElementById(d).offsetHeight;let t=13/672*s*g;t=Math.min(t,20);return t}function k(){return 58/13*j()}function l(){return Math.max(100/11*j()+100*(.05*i.nodes.length)-100,100)}function m(){const u=document.getElementById(d).offsetWidth;const v=document.getElementById(d).offsetHeight;let w=Math.round(Math.sqrt(u*u+v*v)/(7+Math.log(i.nodes.length)));let x=Math.round(Math.sqrt(u*u+v*v)/(90+Math.log(i.nodes.length)));w=Math.min(w,140);x=Math.min(x,20);return[x,w]}const n=document.getElementById(d);const o=a.init(n);const p=m();const q={title:{text:c.startsWith("C")?`Clique ID: ${c.split("C")[1]}`:c,left:"center",textStyle:{fontSize:j()+10,fontWeight:"bolder",color:"#333"}},tooltip:{trigger:"item",triggerOn:"mousemove",formatter:"{b}",backgroundColor:"#F6F8FC",borderColor:"#8C8D8E",borderWidth:1,padding:[3,3,3,3],textStyle:{color:"#4C5058",fontSize:j()}},toolbox:{show:true,feature:{dataView:{show:true,title:"Data View",readOnly:true,optionToContent:y=>{const z=y.series;let A='<textarea style="height: 100%; width: 100%" readonly>Gene Symbol\tSigned P Value\n';for(let B=0,C=z[0].nodes.length;B<C;B++){A+=`${z[0].nodes[B].name}\t${z[0].nodes[B].value}\n`}A+="</textarea>";return A}},saveAsImage:{show:true,title:"Save as Image",type:"png"}}},visualMap:{type:"continuous",min:-165,max:165,seriesIndex:0,itemWidth:p[0],itemHeight:p[1],title:{text:"Signed log10 meta-p",left:"center",top:"bottom"},text:["Tumor\nOver-expressed","Tumor\nUnder-expressed"],precision:3,inRange:{color:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"].reverse()}},series:[{type:"graph",name:`Clique ${c}`,draggable:i.nodes.length<100,layout:"force",nodes:i.nodes,links:i.edges,coordinateSystem:null,roam:true,symbolSize:k(),label:{show:true,position:"inside",fontSize:j(),padding:[3,3,3,3],verticalAlign:"middle",color:"#4C5058",backgroundColor:"#F6F8FC",borderColor:"#8C8D8E",borderWidth:1,borderRadius:4},force:{repulsion:300,edgeLength:l(),friction:.05},itemStyle:{borderColor:"#000",borderWidth:1},lineStyle:{width:i.edges.length<100?1:.5},emphasis:{focus:"none",label:{borderColor:"#000",borderWidth:2,backgroundColor:"#FFA505",color:"#000"}}}]};o.dispatchAction({type:"restore"});q&&o.setOption(q);window.addEventListener("resize",()=>{o.resize();o.setOption({series:{label:{textStyle:{fontSize:j()}},symbolSize:k(),force:{edgeLength:l()}}})});return o})}function update_dag(D,E,F,G=""){return fetch(`${G}data/dag/${E}/${F}.json`).then(H=>H.json()).then(I=>{D.dispatchAction({type:"restore"});if(I.nodes.length>50){D.setOption({title:{text:`${F}\nToo many nodes to display.`,top:"middle"},series:[{nodes:[],links:[]}]});return false}D.setOption({title:{text:F,top:"top"},series:[{name:F,nodes:I.nodes,links:I.edges}]});return D})}