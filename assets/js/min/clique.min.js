function clique_page(a){function b(o,p="clique.json"){let q="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(o));let r=document.createElement("a");r.setAttribute("href",q);r.setAttribute("download",p);document.body.appendChild(r);r.click();r.remove()}function c(s){return!isNaN(parseInt(s))&&isFinite(s)}function d(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(u){let v=document.createElement("table");let w=document.createElement("thead");let x=document.createElement("tbody");let y=document.createElement("tr");for(let z=0;z<u["rows"].length;z++){let A=document.createElement("th");let B=u["rows"][z];if(B=="Hazard Ratio"){B='<abbr title="Explanation of Hazard Ratio">Hazard Ratio</abbr>'}A.innerHTML=B;y.appendChild(A)}w.appendChild(y);v.appendChild(w);for(let C=0;C<u["data"].length;C++){let D=document.createElement("tr");for(let E=0;E<u["data"][C].length;E++){let F=document.createElement("td");let G=u["data"][C][E];if(d(G)){G=parseFloat(G);if(G==0){G="< 2.20e-16"}else if(Math.abs(G)>.001&&Math.abs(G)<1e3){G=G.toPrecision(3)}else{G=G.toExponential(2)}}else if(G==null){G="Not Available"}F.innerHTML=G;D.appendChild(F)}x.appendChild(D)}v.appendChild(x);return v}let f=document.getElementById("gene_search_error");let g=document.getElementById("clique_search_error");let h="../data/clique_genes.json";let i="genes";let j="../data/gene_to_clique.json";fetch(j).then(H=>H.json()).then(I=>{j=I});fetch(h).then(J=>J.json()).then(K=>{let L=document.getElementById(i);for(let M=0;M<K.length;M++){let N=document.createElement("option");N.value=K[M];L.appendChild(N)}if(window.location.search){let O=new URLSearchParams(window.location.search);let P=O.get("clique_id");if(P){P="C"+P;document.getElementById("clique_id").value=`Clique ID: ${P.replace("C","")}`;l.click()}let Q=O.get("gene_id");if(Q){document.getElementById("gene_id").value=Q;m.click()}if(!P&&!Q)n(["C160"])}else{n(["C160"])}});let k=document.getElementById("search_results");let l=document.getElementById("search_button");l.addEventListener("click",function(){f.innerHTML="";let R=document.getElementById("clique_id").value;R="C"+R.split("Clique ID: ")[1];if(!R||!c(R.replace("C",""))){g.innerHTML="Please enter a valid Clique ID between 1 and 281.";return}if(parseInt(R.replace("C",""))>281||parseInt(R.replace("C",""))<1){g.innerHTML="Please enter a valid Clique ID between 1 and 281.";return}k.innerHTML="";g.innerHTML="";window.history.pushState({},"",`?clique_id=${R.replace("C","")}`);n([R])});let m=document.getElementById("gene_search_button");m.addEventListener("click",function(){g.innerHTML="";if(!j){f.innerHTML="Gene to clique data not loaded yet. Please try again.";return}else if(!j[document.getElementById("gene_id").value]){f.innerHTML="Gene not found in any cliques. Please use the dropdown to select valid genes.";return}f.innerHTML="";let S=document.getElementById("gene_id").value;let T=j[S];let U=T.length>1?"cliques":"clique";k.innerHTML=`${S} is a member of ${T.length} ${U}: ${T.join(", ").replace(/C/g,"")}`;if(j[S]){window.history.pushState({},"",`?gene_id=${S}`);n(T,S)}});document.getElementById("clique_id").addEventListener("keyup",function(V){V.preventDefault();if(V.keyCode===13){document.getElementById("search_button").click()}});document.getElementById("gene_id").addEventListener("keyup",function(W){W.preventDefault();if(W.keyCode===13){m.click()}});document.getElementById("clique_id").oninput=function(){let X=document.getElementById("clique_id").value;if(!X.startsWith("Clique ID: ")){document.getElementById("clique_id").value="Clique ID: "}};document.getElementById("clique_id").focus();function n(Y,Z=null){let $=document.getElementById("result_container");$.innerHTML="";for(let _=0;_<Y.length;_++){let aa=document.createElement("div");aa.id=`head_div_${_}`;aa.className="result";if(_!=0)aa.appendChild(document.createElement("hr"));let ba=document.createElement("h3");ba.id=`clique_title_${_}`;ba.style.flex="1";ba.style.height="min-content";ba.style.margin="0pt";ba.style.columnGap="0pt";ba.innerHTML=`Clique ID: ${Y[_].replace("C","")}`;aa.appendChild(ba);let ca=document.createElement("div");ca.id=`result_sub_${_}`;ca.className="result_sub";let da=document.createElement("div");da.id=`info_div_${_}`;da.className="info_div";let ea=document.createElement("h5");ea.className="info_heading";ea.innerHTML="GO Enrichment";let fa=document.createElement("small");fa.className="subtitle";fa.innerHTML="Top enriched GO terms for clique using over-representation analysis";da.appendChild(ea);da.appendChild(fa);let ga=document.createElement("table");ga.style.marginTop="1em";let ha=document.createElement("thead");let ia=document.createElement("tr");let ja=document.createElement("th");ja.innerHTML="GO Category";let ka=document.createElement("th");ka.innerHTML="Go ID";let la=document.createElement("th");la.innerHTML="Go Term";let ma=document.createElement("th");ma.innerHTML="FDR";ia.appendChild(ja);ia.appendChild(ka);ia.appendChild(la);ia.appendChild(ma);ha.appendChild(ia);let na=document.createElement("tbody");na.id=`table_body_${_}`;ga.appendChild(ha);let oa=Y[_];let pa="dense_modules";let qa=document.createElement("div");qa.style.flexGrow="1";let ra=document.createElement("div");ra.id=`dag_${_}`;ra.className="dag";let sa=document.createElement("p");sa.style.color="var(--color-body-light)";sa.style.fontSize="var(--unit)";sa.style.textAlign="center";sa.innerHTML="Gene significance across 5 cohorts (signed -log<sub>10</sub> meta-<i>p</i>).<br>Scroll to zoom, click and drag to move nodes.";qa.appendChild(ra);qa.appendChild(sa);da.appendChild(ga);ca.appendChild(da);ca.appendChild(qa);aa.appendChild(ca);$.appendChild(aa);fetch(`../data/go/clique/${oa}.json`).then(ta=>ta.json()).then(ua=>{na.innerHTML="";let va=["gobp","gomf","gocc"];let wa={gobp:"Biological Process",gomf:"Molecular Function",gocc:"Cellular Component"};for(let xa=0;xa<va.length;xa++){let ya=va[xa];let za=document.createElement("tr");let Aa=document.createElement("td");let Ba=document.createElement("td");let Ca=document.createElement("td");let Da=document.createElement("td");Aa.innerHTML=wa[ya];let Ea=ua[ya].set;Ba.innerHTML=`<a href="https://amigo.geneontology.org/amigo/term/${Ea}" target="_blank">${Ea}</a>`;Ca.innerHTML=ua[ya].set_name;let Fa=parseFloat(ua[ya].fdr);Da.innerHTML=Fa!=0?Fa.toExponential(2):"< 2.20e-16";za.appendChild(Aa);za.appendChild(Ba);za.appendChild(Ca);za.appendChild(Da);na.appendChild(za)}ga.appendChild(na)}).then(()=>{fetch("../data/table/clique/"+oa+".json").then(Ga=>Ga.json()).then(Ha=>{let Ia=e(Ha["tumor_expression"]);Ia.style.marginTop="1em";let Ja=document.createElement("h5");Ja.className="info_heading";Ja.innerHTML="Tumor Expression by Cohort";let Ka=document.createElement("small");Ka.className="subtitle";Ka.innerHTML="The <i>p</i>-values were derived from difference in average protein abundance of clique genes between tumor and normal samples by Wilcoxon rank-sum test.";da.appendChild(Ja);da.appendChild(Ka);da.appendChild(Ia);let La=e(Ha["survival"]);La.style.marginTop="1em";let Ma=document.createElement("h5");Ma.className="info_heading";Ma.innerHTML="Patient Overall Survival by Cohort";let Na=document.createElement("small");Na.className="subtitle";Na.innerHTML="Logrank <i>p</i>-values were derived from Cox-proportional hazard models using average protein abundance of clique genes stratified by median.";da.appendChild(Ma);da.appendChild(Na);da.appendChild(La)}).then(()=>{dag_chart=create_dag(a,pa,oa,ra.id,ignore_size=true,host="../",scale=1.15);dag_chart.then(Oa=>{let Pa=document.createElement("h5");Pa.className="info_heading";Pa.innerHTML="Clique Members";let Qa=document.createElement("small");Qa.className="subtitle";let Ra=document.createElement("div");let Sa=Oa.getOption().series[0].nodes;let Ta="<p>";for(let Ua=0;Ua<Sa.length;Ua++){let Va=Sa[Ua];Ta+=Va.name;if(Ua!=Sa.length-1){Ta+=", "}}Ta+="</p>";Ra.innerHTML=Ta;Qa.innerHTML=`${Sa.length} members`;qa.appendChild(Pa);qa.appendChild(Qa);qa.appendChild(Ra);window.addEventListener("resize",function(){Oa.resize()});Oa.resize();if(Z!=null){Oa.dispatchAction({type:"highlight",seriesIndex:0,name:Z})}})})})}}}