function clique_page(a){function b(o,p="clique.json"){const q=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(o))}`;const r=document.createElement("a");r.setAttribute("href",q);r.setAttribute("download",p);document.body.appendChild(r);r.click();r.remove()}function c(s){return!Number.isNaN(parseInt(s))&&Number.isFinite(s)}function d(t){return!Number.isNaN(parseFloat(t))&&Number.isFinite(t)}function e(u){const v=document.createElement("table");const w=document.createElement("thead");const x=document.createElement("tbody");const y=document.createElement("tr");for(let z=0;z<u.rows.length;z++){const A=document.createElement("th");const B=u.rows[z];A.innerHTML=B;y.appendChild(A)}w.appendChild(y);v.appendChild(w);for(let C=0;C<u.data.length;C++){const D=document.createElement("tr");for(let E=0;E<u.data[C].length;E++){const F=document.createElement("td");let G=u.data[C][E];if(d(G)){G=parseFloat(G);if(G===0){G="< 2.20e-16"}else if(Math.abs(G)>.001&&Math.abs(G)<1e3){G=G.toPrecision(3)}else{G=G.toExponential(2)}}else if(G==null){G="Not Available"}F.innerHTML=G;D.appendChild(F)}x.appendChild(D)}v.appendChild(x);return v}const f=document.getElementById("gene_search_error");const g=document.getElementById("clique_search_error");const h="../data/clique_genes.json";const i="genes";let j="../data/gene_to_clique.json";fetch(j).then(H=>H.json()).then(I=>{j=I});fetch(h).then(J=>J.json()).then(K=>{const L=document.getElementById(i);for(let M=0;M<K.length;M++){const N=document.createElement("option");N.value=K[M];L.appendChild(N)}if(window.location.search){const O=new URLSearchParams(window.location.search);let P=O.get("clique_id");if(P){P=`C${P}`;document.getElementById("clique_id").value=`Clique ID: ${P.replace("C","")}`;l.click()}const Q=O.get("gene_id");if(Q){document.getElementById("gene_id").value=Q;m.click()}if(!P&&!Q)n(["C160"])}else{n(["C160"])}});const k=document.getElementById("search_results");const l=document.getElementById("search_button");l.addEventListener("click",()=>{f.innerHTML="";let R=document.getElementById("clique_id").value;R=`C${R.split("Clique ID: ")[1]}`;if(!R||!c(R.replace("C",""))){g.innerHTML="Please enter a valid Clique ID between 1 and 281.";return}if(parseInt(R.replace("C",""))>281||parseInt(R.replace("C",""))<1){g.innerHTML="Please enter a valid Clique ID between 1 and 281.";return}k.innerHTML="";g.innerHTML="";window.history.pushState({},"",`?clique_id=${R.replace("C","")}`);n([R])});const m=document.getElementById("gene_search_button");m.addEventListener("click",()=>{g.innerHTML="";if(!j){f.innerHTML="Gene to clique data not loaded yet. Please try again.";return}if(!j[document.getElementById("gene_id").value]){f.innerHTML="Gene not found in any cliques. Please use the dropdown to select valid genes.";return}f.innerHTML="";const S=document.getElementById("gene_id").value;const T=j[S];const U=T.length>1?"cliques":"clique";k.innerHTML=`${S} is a member of ${T.length} ${U}: ${T.join(", ").replace(/C/g,"")}`;if(j[S]){window.history.pushState({},"",`?gene_id=${S}`);n(T,S)}});document.getElementById("clique_id").addEventListener("keyup",V=>{V.preventDefault();if(V.keyCode===13){document.getElementById("search_button").click()}});document.getElementById("gene_id").addEventListener("keyup",W=>{W.preventDefault();if(W.keyCode===13){m.click()}});document.getElementById("clique_id").oninput=()=>{const X=document.getElementById("clique_id").value;if(!X.startsWith("Clique ID: ")){document.getElementById("clique_id").value="Clique ID: "}};document.getElementById("clique_id").focus();function n(Y,Z=null){const $=document.getElementById("result_container");$.innerHTML="";for(let _=0;_<Y.length;_++){const aa=document.createElement("div");aa.id=`head_div_${_}`;aa.className="result";if(_!==0)aa.appendChild(document.createElement("hr"));const ba=document.createElement("h3");ba.id=`clique_title_${_}`;ba.style.flex="1";ba.style.height="min-content";ba.style.margin="0pt";ba.style.columnGap="0pt";ba.innerHTML=`Clique ID: ${Y[_].replace("C","")}`;aa.appendChild(ba);const ca=document.createElement("div");ca.id=`result_sub_${_}`;ca.className="result_sub";const da=document.createElement("div");da.id=`info_div_${_}`;da.className="info_div";const ea=document.createElement("h5");ea.className="info_heading";ea.innerHTML="GO Enrichment";const fa=document.createElement("small");fa.className="subtitle";fa.innerHTML="Top enriched GO terms for clique using over-representation analysis";da.appendChild(ea);da.appendChild(fa);const ga=document.createElement("table");ga.style.marginTop="1em";const ha=document.createElement("thead");const ia=document.createElement("tr");const ja=document.createElement("th");ja.innerHTML="GO Category";const ka=document.createElement("th");ka.innerHTML="Go ID";const la=document.createElement("th");la.innerHTML="Go Term";const ma=document.createElement("th");ma.innerHTML="<i>p</i>-Value";ma.style.whiteSpace="nowrap";const na=document.createElement("th");na.innerHTML="FDR";ia.appendChild(ja);ia.appendChild(ka);ia.appendChild(la);ia.appendChild(ma);ia.appendChild(na);ha.appendChild(ia);const oa=document.createElement("tbody");oa.id=`table_body_${_}`;ga.appendChild(ha);ga.className="long_table";const pa=Y[_];const qa="dense_modules";const ra=document.createElement("div");ra.style.flexGrow="1";const sa=document.createElement("div");sa.id=`dag_${_}`;sa.className="dag";const ta=document.createElement("p");ta.style.color="var(--color-body-light)";ta.style.fontSize="var(--unit)";ta.style.textAlign="center";ta.innerHTML="Gene significance across 5 cohorts (signed -log<sub>10</sub> meta-<i>p</i>).<br>Scroll to zoom, click and drag to move nodes.";ra.appendChild(sa);ra.appendChild(ta);da.appendChild(ga);ca.appendChild(da);ca.appendChild(ra);aa.appendChild(ca);$.appendChild(aa);fetch(`../data/go/clique/${pa}.json`).then(ua=>ua.json()).then(va=>{oa.innerHTML="";const wa=["gobp","gomf","gocc"];const xa={gobp:"Biological Process",gomf:"Molecular Function",gocc:"Cellular Component"};for(let ya=0;ya<wa.length;ya++){const za=wa[ya];const Aa=document.createElement("tr");const Ba=document.createElement("td");const Ca=document.createElement("td");const Da=document.createElement("td");const Ea=document.createElement("td");const Fa=document.createElement("td");Ba.innerHTML=xa[za];const Ga=va[za].set;Ca.innerHTML=`<a href="https://amigo.geneontology.org/amigo/term/${Ga}" target="_blank">${Ga}</a>`;Da.innerHTML=va[za].set_name;const Ha=parseFloat(va[za].p);Ea.innerHTML=Ha!==0?Ha.toExponential(2):"< 2.20e-16";const Ia=parseFloat(va[za].fdr);Fa.innerHTML=Ia!==0?Ia.toExponential(2):"< 2.20e-16";Aa.appendChild(Ba);Aa.appendChild(Ca);Aa.appendChild(Da);Aa.appendChild(Ea);Aa.appendChild(Fa);oa.appendChild(Aa)}ga.appendChild(oa)}).then(()=>{fetch(`../data/table/clique/${pa}.json`).then(Ja=>Ja.json()).then(Ka=>{const La=e(Ka.tumor_expression);La.style.marginTop="1em";const Ma=document.createElement("h5");Ma.className="info_heading";Ma.innerHTML="Tumor Expression by Cohort";const Na=document.createElement("small");Na.className="subtitle";Na.innerHTML="The <i>p</i>-values were derived from difference in average protein abundance of clique genes between tumor and normal samples by Wilcoxon rank-sum test.";da.appendChild(Ma);da.appendChild(Na);da.appendChild(La);const Oa=e(Ka.survival);Oa.style.marginTop="1em";const Pa=document.createElement("h5");Pa.className="info_heading";Pa.innerHTML="Patient Overall Survival by Cohort";const Qa=document.createElement("small");Qa.className="subtitle";Qa.innerHTML="Logrank <i>p</i>-values were derived from Cox-proportional hazard models using average protein abundance of clique genes stratified by median.";da.appendChild(Pa);da.appendChild(Qa);da.appendChild(Oa)}).then(()=>{dag_chart=create_dag(a,qa,pa,sa.id,true,"../",1.15);dag_chart.then(Ra=>{const Sa=document.createElement("h5");Sa.className="info_heading";Sa.innerHTML="Clique Members";const Ta=document.createElement("small");Ta.className="subtitle";const Ua=document.createElement("div");const Va=Ra.getOption().series[0].nodes;let Wa="<p>";for(let Xa=0;Xa<Va.length;Xa++){const Ya=Va[Xa];Wa+=Ya.name;if(Xa!==Va.length-1){Wa+=", "}}Wa+="</p>";Ua.innerHTML=Wa;Ta.innerHTML=`${Va.length} members`;ra.appendChild(Sa);ra.appendChild(Ta);ra.appendChild(Ua);window.addEventListener("resize",()=>{Ra.resize()});Ra.resize();if(Z!=null){Ra.dispatchAction({type:"highlight",seriesIndex:0,name:Z})}})})})}}}